<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>reactnet.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Reactnet 0.1.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>reactnet</span></div></div></li><li class="depth-2 branch current"><a href="reactnet.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="reactnet.executors.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>executors</span></div></a></li><li class="depth-2 branch"><a href="reactnet.netrefs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>netrefs</span></div></a></li><li class="depth-2 branch"><a href="reactnet.reactives.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>reactives</span></div></a></li><li class="depth-2 branch"><a href="reactnet.reactor.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>reactor</span></div></a></li><li class="depth-2"><a href="reactnet.scheduler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>scheduler</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="reactnet.core.html#var-*netref*"><div class="inner"><span>*netref*</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-add-links.21"><div class="inner"><span>add-links!</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-broadcast-value"><div class="inner"><span>broadcast-value</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-complete.21"><div class="inner"><span>complete!</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-default-link-fn"><div class="inner"><span>default-link-fn</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-enqueue-values"><div class="inner"><span>enqueue-values</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-fn-spec.3F"><div class="inner"><span>fn-spec?</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-fvalue"><div class="inner"><span>fvalue</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-IExecutor"><div class="inner"><span>IExecutor</span></div></a></li><li class="depth-2"><a href="reactnet.core.html#var-execute"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>execute</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-INetworkRef"><div class="inner"><span>INetworkRef</span></div></a></li><li class="depth-2 branch"><a href="reactnet.core.html#var-enq"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>enq</span></div></a></li><li class="depth-2"><a href="reactnet.core.html#var-network"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>network</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-IReactive"><div class="inner"><span>IReactive</span></div></a></li><li class="depth-2 branch"><a href="reactnet.core.html#var-available.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>available?</span></div></a></li><li class="depth-2 branch"><a href="reactnet.core.html#var-completed.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>completed?</span></div></a></li><li class="depth-2 branch"><a href="reactnet.core.html#var-consume.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>consume!</span></div></a></li><li class="depth-2 branch"><a href="reactnet.core.html#var-deliver.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>deliver!</span></div></a></li><li class="depth-2 branch"><a href="reactnet.core.html#var-next-value"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>next-value</span></div></a></li><li class="depth-2"><a href="reactnet.core.html#var-pending.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pending?</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-link-inputs"><div class="inner"><span>link-inputs</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-link-outputs"><div class="inner"><span>link-outputs</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-make-exec-link-fn"><div class="inner"><span>make-exec-link-fn</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-make-link"><div class="inner"><span>make-link</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-make-network"><div class="inner"><span>make-network</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-make-result-map"><div class="inner"><span>make-result-map</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-make-sync-link-fn"><div class="inner"><span>make-sync-link-fn</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-now"><div class="inner"><span>now</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-pp"><div class="inner"><span>pp</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-push.21"><div class="inner"><span>push!</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-reactive.3F"><div class="inner"><span>reactive?</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-remove-links.21"><div class="inner"><span>remove-links!</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-safely-apply"><div class="inner"><span>safely-apply</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-single-value"><div class="inner"><span>single-value</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-unpack-fn"><div class="inner"><span>unpack-fn</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-update-and-propagate.21"><div class="inner"><span>update-and-propagate!</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-value"><div class="inner"><span>value</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-values"><div class="inner"><span>values</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-with-netref"><div class="inner"><span>with-netref</span></div></a></li><li class="depth-1"><a href="reactnet.core.html#var-zip-values"><div class="inner"><span>zip-values</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">reactnet.core</h2><div class="doc"><pre class="plaintext">Implementation of a propagation network.
</pre></div><div class="public anchor" id="var-*netref*"><h3>*netref*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext">A reference to a default network.
</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L120">view source</a></div></div><div class="public anchor" id="var-add-links.21"><h3>add-links!</h3><div class="usage"><code>(add-links! netref &amp; links)</code></div><div class="doc"><pre class="plaintext">Adds links to the network. Returns the network ref.
</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L776">view source</a></div></div><div class="public anchor" id="var-broadcast-value"><h3>broadcast-value</h3><div class="usage"><code>(broadcast-value v rs)</code></div><div class="doc"><pre class="plaintext">Returns an RVT seq where the value v is assigned to every reactive
in rs.</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L186">view source</a></div></div><div class="public anchor" id="var-complete.21"><h3>complete!</h3><div class="usage"><code>(complete! r)</code><code>(complete! netref r)</code></div><div class="doc"><pre class="plaintext">Delivers the ::completed value into a reactive r and notifies the
complete-fn handler of all links which have r as their
input. Updates the network according to results of
handlers. Returns ::completed.</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L764">view source</a></div></div><div class="public anchor" id="var-default-link-fn"><h3>default-link-fn</h3><div class="usage"><code>(default-link-fn {:keys [input-rvts input-reactives output-reactives], :as input})</code></div><div class="doc"><pre class="plaintext">A link-function that implements a pass-through of inputs to outputs.
If there is more than one input reactive, zips values of all inputs
into a vector, otherwise takes the single value.  Returns a Result
map with the extracted value assigned to all output reactives.</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L245">view source</a></div></div><div class="public anchor" id="var-enqueue-values"><h3>enqueue-values</h3><div class="usage"><code>(enqueue-values vs r)</code></div><div class="doc"><pre class="plaintext">Returns an RVT seq where all values in vs are assigned to the same
reactive r.</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L204">view source</a></div></div><div class="public anchor" id="var-fn-spec.3F"><h3>fn-spec?</h3><div class="usage"><code>(fn-spec? f)</code></div><div class="doc"><pre class="plaintext">Returns true if f is either a function or a map containing a
function in an :f entry.</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L884">view source</a></div></div><div class="public anchor" id="var-fvalue"><h3>fvalue</h3><div class="usage"><code>(fvalue rvts)</code></div><div class="doc"><pre class="plaintext">Returns the value from the first item of an RVT seq.
</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L156">view source</a></div></div><div class="public anchor" id="var-IExecutor"><h3>IExecutor</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-execute"><h3>execute</h3><div class="usage"><code>(execute e netref f)</code></div><div class="doc"><pre class="plaintext">Execute a no-arg function f in the context of the network
reference netref.</pre></div></div></div></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L812">view source</a></div></div><div class="public anchor" id="var-INetworkRef"><h3>INetworkRef</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-enq"><h3>enq</h3><div class="usage"><code>(enq netref stimulus)</code></div><div class="doc"><pre class="plaintext">Enqueue a new update/propagation cycle that will process a
stimulus containing a seq of result maps, remove links by predicate,
add new links and propagate the values in the {Reactive -&gt; [v t]}
map.

Returns the netref.

An implementation should delegate to update-and-propagate!
function.</pre></div></div><div class="public anchor" id="var-network"><h3>network</h3><div class="usage"><code>(network netref)</code></div><div class="doc"><pre class="plaintext">Return the network map.
</pre></div></div></div></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L104">view source</a></div></div><div class="public anchor" id="var-IReactive"><h3>IReactive</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-available.3F"><h3>available?</h3><div class="usage"><code>(available? r)</code></div><div class="doc"><pre class="plaintext">Returns true if the reactive r will provide a value upon
next-value / consume.</pre></div></div><div class="public anchor" id="var-completed.3F"><h3>completed?</h3><div class="usage"><code>(completed? r)</code></div><div class="doc"><pre class="plaintext">Returns true if the reactive r will neither accept nor return a new value.
</pre></div></div><div class="public anchor" id="var-consume.21"><h3>consume!</h3><div class="usage"><code>(consume! r)</code></div><div class="doc"><pre class="plaintext">Returns the next value-timestamp pair of the reactive r and may
turn the state into unavailable.</pre></div></div><div class="public anchor" id="var-deliver.21"><h3>deliver!</h3><div class="usage"><code>(deliver! r value-timestamp-pair)</code></div><div class="doc"><pre class="plaintext">Sets/adds a pair of value and timestamp to r, returns true if a
propagation of the value should be triggered.</pre></div></div><div class="public anchor" id="var-next-value"><h3>next-value</h3><div class="usage"><code>(next-value r)</code></div><div class="doc"><pre class="plaintext">Returns the next value-timestamp pair of the reactive r without
consuming it.</pre></div></div><div class="public anchor" id="var-pending.3F"><h3>pending?</h3><div class="usage"><code>(pending? r)</code></div><div class="doc"><pre class="plaintext">Returns true if r contains values that wait for being consumed.
</pre></div></div></div></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L21">view source</a></div></div><div class="public anchor" id="var-link-inputs"><h3>link-inputs</h3><div class="usage"><code>(link-inputs link)</code></div><div class="doc"><pre class="plaintext">Returns the input-reactives of a link.
</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L234">view source</a></div></div><div class="public anchor" id="var-link-outputs"><h3>link-outputs</h3><div class="usage"><code>(link-outputs link)</code></div><div class="doc"><pre class="plaintext">Returns the output-reactives of a link, unwrapping them from WeakReferences.
</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L228">view source</a></div></div><div class="public anchor" id="var-make-exec-link-fn"><h3>make-exec-link-fn</h3><div class="usage"><code>(make-exec-link-fn executor f)</code><code>(make-exec-link-fn executor f result-fn)</code></div><div class="doc"><pre class="plaintext">Takes a function f and wraps it&apos;s execution in an executors execute, 
thus allowing a different thread to evaluate f.
Any result will be pushed asynchronously into the network.

The optional result-fn is a function [Result Value Exception -&gt; Result] 
that returns the input Result map with updated values for 
:output-rvts, :exception, :add, :remove-by, :no-consume entries.

Returns a link function.</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L838">view source</a></div></div><div class="public anchor" id="var-make-link"><h3>make-link</h3><div class="usage"><code>(make-link label inputs outputs &amp; {:keys [link-fn error-fn complete-fn complete-on-remove], :or {link-fn default-link-fn}})</code></div><div class="doc"><pre class="plaintext">Creates and returns a new Link map. 

Label is an arbitrary text, inputs and outputs are sequences of
reactives.

Output reactives are kept using WeakReferences.

The link-fn is a Link function [Result -&gt; Result] which is called to
produce a result from inputs-rvts. Defaults to default-link-fn.

The error-fn is a function [Result -&gt; Result] which is called when
an exception was thrown by the Link function. Defaults to nil.

The complete-fn is a function [Link Reactive -&gt; Result] which is called for
each input reactive that completes. Defaults to nil.

The sequence complete-on-remove contains all reactives that should be
completed when this Link is removed from the network.</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L258">view source</a></div></div><div class="public anchor" id="var-make-network"><h3>make-network</h3><div class="usage"><code>(make-network id links)</code></div><div class="doc"><pre class="plaintext">Returns a new network.
</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L295">view source</a></div></div><div class="public anchor" id="var-make-result-map"><h3>make-result-map</h3><div class="usage"><code>(make-result-map input value)</code><code>(make-result-map {:keys [output-reactives], :as input} value ex)</code></div><div class="doc"><pre class="plaintext">Input is a Result map as passed into a Link function. If the
exception ex is nil produces a broadcasting output-rvts, otherwise
adds the exception. Returns an updated Result map.</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L826">view source</a></div></div><div class="public anchor" id="var-make-sync-link-fn"><h3>make-sync-link-fn</h3><div class="usage"><code>(make-sync-link-fn f)</code><code>(make-sync-link-fn f result-fn)</code></div><div class="doc"><pre class="plaintext">Takes a function f and wraps it&apos;s synchronous execution so that
exceptions are caught and the return value is properly assigned to
all output reactives.

The optional result-fn is a function [Result Value Exception -&gt; Result] 
that returns the input Result map with updated values for 
:output-rvts, :exception, :add, :remove-by, :no-consume entries.

Returns a link function.</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L866">view source</a></div></div><div class="public anchor" id="var-now"><h3>now</h3><div class="usage"><code>(now)</code></div><div class="doc"><pre class="plaintext">Returns the current epoch time in milliseconds.
</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L172">view source</a></div></div><div class="public anchor" id="var-pp"><h3>pp</h3><div class="usage"><code>(pp)</code><code>(pp netref)</code></div><div class="doc"><pre class="plaintext">Pretty print network in netref.
</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L788">view source</a></div></div><div class="public anchor" id="var-push.21"><h3>push!</h3><div class="usage"><code>(push! r v)</code><code>(push! netref r v)</code><code>(push! netref r v t)</code></div><div class="doc"><pre class="plaintext">Delivers a value v to the reactive r and starts a propagation
cycle. Returns the value v.</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L752">view source</a></div></div><div class="public anchor" id="var-reactive.3F"><h3>reactive?</h3><div class="usage"><code>(reactive? r)</code></div><div class="doc"><pre class="plaintext">Returns true if r satisfies IReactive.
</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L140">view source</a></div></div><div class="public anchor" id="var-remove-links.21"><h3>remove-links!</h3><div class="usage"><code>(remove-links! netref pred)</code></div><div class="doc"><pre class="plaintext">Removes links from the network. Returns the network ref.
</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L782">view source</a></div></div><div class="public anchor" id="var-safely-apply"><h3>safely-apply</h3><div class="usage"><code>(safely-apply f xs)</code></div><div class="doc"><pre class="plaintext">Applies f to xs, and catches exceptions.
Returns a pair of [result exception], at least one of them being nil.</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L818">view source</a></div></div><div class="public anchor" id="var-single-value"><h3>single-value</h3><div class="usage"><code>(single-value v r)</code></div><div class="doc"><pre class="plaintext">Returns a sequence with exactly one RVT pair assigned to reactive
r.</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L178">view source</a></div></div><div class="public anchor" id="var-unpack-fn"><h3>unpack-fn</h3><div class="usage"><code>(unpack-fn {:keys [f executor], :as fn-spec})</code></div><div class="doc"><pre class="plaintext">Returns a pair of two functions. First is a factory [Lift-Fn
Make-Result-Fn -&gt; Link-Fn] that creates a link function. Second is
an arbitrary function that is lifted by the factory.</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L892">view source</a></div></div><div class="public anchor" id="var-update-and-propagate.21"><h3>update-and-propagate!</h3><div class="usage"><code>(update-and-propagate! network {:keys [results add remove-by rvt-map]})</code></div><div class="doc"><pre class="plaintext">Updates network with the contents of the stimulus map,
delivers any values and runs propagation cycles as link-functions
return non-empty results.  Returns the network.</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L726">view source</a></div></div><div class="public anchor" id="var-value"><h3>value</h3><div class="usage"><code>(value [r [v t]])</code></div><div class="doc"><pre class="plaintext">Returns the value from an RVT.
</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L150">view source</a></div></div><div class="public anchor" id="var-values"><h3>values</h3><div class="usage"><code>(values rvts)</code></div><div class="doc"><pre class="plaintext">Returns a vector with all extracted values from an RVT seq.
</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L162">view source</a></div></div><div class="public anchor" id="var-with-netref"><h3>with-netref</h3><h4 class="type">macro</h4><div class="usage"><code>(with-netref netref &amp; exprs)</code></div><div class="doc"><pre class="plaintext">Binds the given netref to the dynamic var *netref* and executes
the expressions within that binding.</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L800">view source</a></div></div><div class="public anchor" id="var-zip-values"><h3>zip-values</h3><div class="usage"><code>(zip-values vs rs)</code></div><div class="doc"><pre class="plaintext">Returns an RVT seq where values are position-wise assigned to
reactives.</pre></div><div class="src-link"><a href="https://github.com/friemen/reactnet/blob/master/src/reactnet/core.clj#L195">view source</a></div></div></div></body></html>